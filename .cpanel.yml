---
deployment: 
  tasks: 
    # è¼‰å…¥ .env æ–‡ä»¶ä¸­çš„è®Šæ•¸
    - export $(cat .env | xargs) 

    # ç²å–ç•¶å‰åˆ†æ”¯åç¨± 
    - export BRANCH=$(git symbolic-ref --short HEAD)

    # æ ¹æ“šåˆ†æ”¯åç¨±åŸ·è¡Œä¸åŒçš„éƒ¨ç½²é‚è¼¯
    - |
      if [ "$BRANCH" = "main" ]; then
        echo "ğŸš€ Deploying to PRODUCTION site"
        rsync -av --delete --exclude='.git' --exclude='.cpanel.yml' --exclude='.github/' --exclude='.env' ./ $PRODUCTION_PLUGIN_PATH
      elif [ "$BRANCH" = "develop" ]; then
        echo "ğŸš§ Deploying to DEVELOPMENT site"
        rsync -av --delete --exclude='.git' --exclude='.cpanel.yml' --exclude='.github/' --exclude='.env' ./ $DEVELOPMENT_PLUGIN_PATH
      else
        echo "âŒ Branch not set for deployment: $BRANCH"
        exit 1
      fi